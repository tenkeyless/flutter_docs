---
# title: Integrate a Flutter module into your Android project
title: Android 프로젝트에 Flutter 모듈 통합
# short-title: Integrate Flutter
short-title: Flutter 통합
# description: Learn how to integrate a Flutter module into your existing Android project.
description: 기존 Android 프로젝트에 Flutter 모듈을 통합하는 방법을 알아보세요.
---

Flutter는 기존 Android 애플리케이션에 조각조각으로 임베드할 수 있으며, 
소스 코드 Gradle subproject 또는 AAR로 임베드할 수 있습니다.

통합 흐름은 [Flutter 플러그인][Flutter plugin]을 사용하여 Android Studio IDE를 사용하거나 수동으로 수행할 수 있습니다.

:::warning
기존 Android 앱은 `mips` 또는 `x86`과 같은 아키텍처를 지원할 수 있습니다. 
Flutter는 현재 `x86_64`, `armeabi-v7a` 및 `arm64-v8a`에 대한 
사전 컴파일(ahead-of-time (AOT))된 라이브러리 빌드만 [지원][only supports]합니다.

APK에서 지원되는 아키텍처를 제한하려면, [`abiFilters`][] Android Gradle 플러그인 API를 사용하는 것을 고려하세요. 
이렇게 하면 `libflutter.so` 런타임 크래시가 누락되는 것을 방지할 수 있습니다. 예를 들어, 다음과 같습니다.

{% tabs "android-build-language" %}
{% tab "Kotlin" %}

```kotlin title="MyApp/app/build.gradle.kts"
android {
    //...
    defaultConfig {
        ndk {
            // Flutter에서 지원하는 아키텍처에 대한 필터
            abiFilters += listOf("armeabi-v7a", "arm64-v8a", "x86_64")
        }
    }
}
```

{% endtab %}
{% tab "Groovy" %}

```groovy title="MyApp/app/build.gradle"
android {
    // ...
    defaultConfig {
        ndk {
            // Flutter에서 지원하는 아키텍처에 대한 필터
            abiFilters "armeabi-v7a", "arm64-v8a", "x86_64"
        }
    }
}
```

{% endtab %}
{% endtabs %}

Flutter 엔진에는 `x86_64` 버전도 있습니다. 
디버그 Just-In-Time(JIT) 모드에서 에뮬레이터를 사용할 때, Flutter 모듈은 여전히 ​​올바르게 실행됩니다.
:::

## Flutter 모듈 통합 {:#integrate-your-flutter-module}

{% tabs %}
{% tab "With Android Studio" %}

### Android Studio로 통합하기 {:#integrate-with-android-studio .no_toc}

The Android Studio IDE can help integrate your Flutter module.
Using Android Studio, you can edit both your Android and Flutter code
in the same IDE.

You can also use IntelliJ Flutter plugin functionality like
Dart code completion, hot reload, and widget inspector.

To build your app, the Android Studio plugin configures your
Android project to add your Flutter module as a dependency.

1. Open your Android project in Android Studio.

1. Go to **File** > **New** > **New Project...**.
    The **New Project** dialog displays.

1. Click **Flutter**.

1. If asked to provide your **Flutter SDK path**, do so and click **Next**.

1. Complete the configuration of your Flutter module.

    * If you have an existing project:

        {: type="a"}
        1. To choose an existing project, click **...**
           to the right of the **Project location** box.
        1. Navigate to your Flutter project directory.
        1. Click **Open**.

    * If you need to create a new Flutter project:

        {: type="a"}
        1. Complete the configuration dialog.
        1. In the **Project type** menu, select **Module**.

1. Click **Finish**.

:::tip
By default, your project's Project pane might show the 'Android' view.
If you can't see your new Flutter files in the Project pane,
set your Project pane to display **Project Files**.
This shows all files without filtering.
:::

{% endtab %}
{% tab "Without Android Studio" %}

### Android Studio 없이 통합하기 {:#integrate-without-android-studio .no_toc}

To integrate a Flutter module with an existing Android app
manually, without using Flutter's Android Studio plugin,
follow these steps:

#### Flutter 모듈 생성 {:#create-a-flutter-module}

Let's assume that you have an existing Android app at
`some/path/MyApp`, and that you want your Flutter
project as a sibling:

```console
cd some/path/
flutter create -t module --org com.example flutter_module
```

This creates a `some/path/flutter_module/` Flutter module project
with some Dart code to get you started and an `.android/`
hidden subfolder. The `.android` folder contains an
Android project that can both help you run a barebones
standalone version of your Flutter module via `flutter run`
and it's also a wrapper that helps bootstrap the Flutter
module an embeddable Android library.

:::note
Add custom Android code to your own existing
application's project or a plugin,
not to the module in `.android/`.
Changes made in your module's `.android/`
directory won't appear in your existing Android
project using the module.

Do not source control the `.android/` directory
since it's autogenerated. Before building the
module on a new machine, run `flutter pub get`
in the `flutter_module` directory first to regenerate
the `.android/` directory before building the
Android project using the Flutter module.
:::

:::note
To avoid Dex merging issues, `flutter.androidPackage` should
not be identical to your host app's package name.
:::

#### Java 버전 요구 사항 {:#java-version-requirement}

Flutter requires your project to declare compatibility with Java 11 or later.

Before attempting to connect your Flutter module project
to your host Android app, ensure that your host Android
app declares the following source compatibility within your
app's `build.gradle` file, under the `android { }` block.

```groovy title="MyApp/app/build.gradle"
android {
    // ...
    compileOptions {
        sourceCompatibility = 11 // The minimum value
        targetCompatibility = 11 // The minimum value
    }
}
```

#### 저장소 설정 중앙화 {:#centralize-repository-settings}

Starting with Gradle 7, Android recommends using centralized repository
declarations in `settings.gradle` instead of project or module level
declarations in `build.gradle` files.

Before attempting to connect your Flutter module project to your
host Android app, make the following changes.

1. Remove the `repositories` block in all of your app's `build.gradle` files.

   ```groovy
   // Remove the following block, starting on the next line
       repositories {
           google()
           mavenCentral()
       }
   // ...to the previous line
   ```

1. Add the `dependencyResolutionManagement` displayed in this step to the
   `settings.gradle` file.

   ```groovy
   dependencyResolutionManagement {
      repositoriesMode = RepositoriesMode.PREFER_SETTINGS
      repositories {
          google()
          mavenCentral()
      }
   }
   ```

{% endtab %}
{% endtabs %}

## Flutter 모듈을 종속성으로 추가하기 {:#add-the-flutter-module-as-a-dependency}

Add the Flutter module as a dependency of your
existing app in Gradle. You can achieve this in two ways.

1. **Android archive**
    The AAR mechanism creates generic Android AARs as
    intermediaries that packages your Flutter module.
    This is good when your downstream app builders don't
    want to have the Flutter SDK installed. But,
    it adds one more build step if you build frequently.

1. **Module source code**
    The source code subproject mechanism is a convenient
    one-click build process, but requires the Flutter SDK.
    This is the mechanism used by the Android Studio IDE plugin.

{% tabs %}
{% tab "Android Archive" %}

### Android Archive(AAR)에 의존 {:#depend-on-the-android-archive-aar .no_toc}

This option packages your Flutter library as a generic local
Maven repository composed of AARs and POMs artifacts.
This option allows your team to build the host app without
installing the Flutter SDK. You can then distribute the
artifacts from a local or remote repository.

Let's assume you built a Flutter module at
`some/path/flutter_module`, and then run:

```console
cd some/path/flutter_module
flutter build aar
```

Then, follow the on-screen instructions to integrate.

{% render docs/app-figure.md, image:"development/add-to-app/android/project-setup/build-aar-instructions.png" %}

More specifically, this command creates
(by default all debug/profile/release modes)
a [local repository][], with the following files:

```plaintext
build/host/outputs/repo
└── com
    └── example
        └── flutter_module
            ├── flutter_release
            │   ├── 1.0
            │   │   ├── flutter_release-1.0.aar
            │   │   ├── flutter_release-1.0.aar.md5
            │   │   ├── flutter_release-1.0.aar.sha1
            │   │   ├── flutter_release-1.0.pom
            │   │   ├── flutter_release-1.0.pom.md5
            │   │   └── flutter_release-1.0.pom.sha1
            │   ├── maven-metadata.xml
            │   ├── maven-metadata.xml.md5
            │   └── maven-metadata.xml.sha1
            ├── flutter_profile
            │   ├── ...
            └── flutter_debug
                └── ...
```

To depend on the AAR, the host app must be able
to find these files.

To do that, edit `settings.gradle` in your host app
so that it includes the local repository and the dependency:

```groovy
dependencyResolutionManagement {
    repositoriesMode = RepositoriesMode.PREFER_SETTINGS
    repositories {
        google()
        mavenCentral()

        // Add the new repositories starting on the next line...
        maven {
            url = uri("some/path/flutter_module/build/host/outputs/repo")
            // This is relative to the location of the build.gradle file
            // if using a relative path.
        }

        maven {
            url = uri("https://storage.googleapis.com/download.flutter.io")
        }
        // ...to before this line  
    }
}
```

<br>

### Kotlin DSL 기반 Android 프로젝트 {:#kotlin-dsl-based-android-project}

After an `aar` build of a Kotlin DSL-based Android project,
follow these steps to add the flutter_module.

Include the flutter module as a dependency in 
the Android project's `app/build.gradle` file.

```kotlin title="MyApp/app/build.gradle.kts"
android {
    buildTypes {
        release {
          ...
        }
        debug {
          ...
        }
        create("profile") {
            initWith(getByName("debug"))
        }
}

dependencies {
  // ...
  debugImplementation("com.example.flutter_module:flutter_debug:1.0")
  releaseImplementation("com.example.flutter_module:flutter_release:1.0")
  add("profileImplementation", "com.example.flutter_module:flutter_profile:1.0")
}
```

The `profileImplementation` ID is a custom `configuration` to be
implemented in the `app/build.gradle` file of a host project.

```kotlin title="host-project/app/build.gradle.kts"
configurations {
    getByName("profileImplementation") {
    }
}
```

```kotlin title="MyApp/settings.gradle.kts"
include(":app")

dependencyResolutionManagement {
    repositories {
        maven(url = "https://storage.googleapis.com/download.flutter.io")
        maven(url = "some/path/flutter_module_project/build/host/outputs/repo")
    }
}
```

:::important
If you're located in China, use a mirror site rather than the
`storage.googleapis.com` domain. To learn more about mirror sites,
check out [Using Flutter in China][] page.
:::

:::tip
You can also build an AAR for your Flutter module in Android Studio using
the `Build > Flutter > Build AAR` menu.

{% render docs/app-figure.md, image:"development/add-to-app/android/project-setup/ide-build-aar.png" %}
:::

{% endtab %}
{% tab "Module source code" %}

### 모듈 소스 코드에 의존 {:#depend-on-the-modules-source-code .no_toc}

This option enables a one-step build for both your
Android project and Flutter project. This option is
convenient when you work on both parts simultaneously
and rapidly iterate, but your team must install the
Flutter SDK to build the host app.

:::tip
By default, the host app provides the `:app` Gradle project.
To change the name of this project, set
`flutter.hostAppProjectName` in the Flutter module's
`gradle.properties` file.
Include this project in the host app's `settings.gradle` file.
:::

Include the Flutter module as a subproject in the host app's
`settings.gradle`. This example assumes `flutter_module` and `MyApp`
exist in the same directory

```groovy title="MyApp/settings.gradle"
// Include the host app project.
include(":app")                                   // assumed existing content
setBinding(new Binding([gradle: this]))                                // new
evaluate(new File(                                                     // new
    settingsDir.parentFile,                                            // new
    'flutter_module/.android/include_flutter.groovy'                   // new
))                                                                     // new
```

The binding and script evaluation allows the Flutter
module to `include` itself (as `:flutter`) and any
Flutter plugins used by the module (such as `:package_info` and `:video_player`)
in the evaluation context of your `settings.gradle`.

Introduce an `implementation` dependency on the Flutter
module from your app:

```groovy title="MyApp/app/build.gradle"
dependencies {
    implementation(project(":flutter"))
}
```

{% endtab %}
{% endtabs %}

Your app now includes the Flutter module as a dependency.

Continue to the [Adding a Flutter screen to an Android app][] guide.

[`abiFilters`]: {{site.android-dev}}/reference/tools/gradle-api/4.2/com/android/build/api/dsl/Ndk#abiFilters:kotlin.collections.MutableSet
[Adding a Flutter screen to an Android app]: /add-to-app/android/add-flutter-screen
[Flutter plugin]: https://plugins.jetbrains.com/plugin/9212-flutter
[local repository]: https://docs.gradle.org/current/userguide/declaring_repositories.html#sub:maven_local
[only supports]: /resources/faq#what-devices-and-os-versions-does-flutter-run-on
[Using Flutter in China]: /community/china
