---
# title: Customizing web app initialization
title: 웹 앱 초기화 커스터마이즈
# description: Customize how Flutter apps are initialized on the web.
description: Flutter 앱이 웹에서 초기화되는 방식을 커스터마이즈합니다.
---

:::note
이 페이지에서는 Flutter 3.21 또는 이전 버전에서 사용 가능한 API를 설명합니다. 
Flutter 3.22 이상에서 웹 앱 초기화를 구성하려면, 새로운 [Flutter 웹 앱 초기화][Flutter web app initialization] 문서를 확인하세요.
:::

[`stable`]: {{site.github}}/flutter/flutter/blob/master/docs/releases/Flutter-build-release-channels.md#stable
[Flutter web app initialization]: /platform-integration/web/initialization

`flutter.js`에서 제공하는 `_flutter.loader` JavaScript API를 사용하여, 
웹에서 Flutter 앱이 초기화되는 방식을 커스터마이즈할 수 있습니다. 
이 API는 CSS에서 로딩 표시기를 표시하거나, 조건에 따라 앱이 로드되는 것을 방지하거나, 
사용자가 버튼을 누를 때까지 기다렸다가 앱을 표시하는 데 사용할 수 있습니다.

초기화 프로세스는 다음 단계로 나뉩니다.

**진입점 스토리 로딩**
: `main.dart.js` 스크립트를 가져오고, 서비스 워커를 초기화합니다.

**Flutter 엔진 초기화**
: assets, 글꼴, CanvasKit과 같은 필수 리소스를 다운로드하여, Flutter 웹 엔진을 초기화합니다.

**앱 실행**
: Flutter 앱의 DOM을 준비하고 실행합니다.

이 페이지에서는 초기화 프로세스의 각 단계에서 동작을 커스터마이즈 하는 방법을 보여줍니다.

## 시작하기 {:#getting-started}

By default, the `index.html` file
generated by the `flutter create` command
contains a script tag
that calls `loadEntrypoint` from the `flutter.js` file:

```html
<html>
  <head>
    <!-- ... -->
    <script src="flutter.js" defer></script>
  </head>
  <body>
    <script>
      window.addEventListener('load', function (ev) {
        // Download main.dart.js
        _flutter.loader.loadEntrypoint({
          serviceWorker: {
            serviceWorkerVersion: serviceWorkerVersion,
          },
          onEntrypointLoaded: async function(engineInitializer) {
            // Initialize the Flutter engine
            let appRunner = await engineInitializer.initializeEngine();
            // Run the app
            await appRunner.runApp();
          }
        });
      });
    </script>
  </body>
</html>
```

:::note
In Flutter 2.10 or earlier,
this script doesn't support customization.
To upgrade your `index.html` file to the latest version,
see [Upgrading an older project](#upgrading-an-older-project).
:::

The `loadEntrypoint` function calls the `onEntrypointLoaded` callback
once the Service Worker is initialized, and the `main.dart.js` entrypoint
has been downloaded and run by the browser. Flutter also calls
`onEntrypointLoaded` on every hot restart during development.

The `onEntrypointLoaded` callback receives an **engine initializer** object as
its only parameter. Use the engine initializer to set the run-time
configuration, and start the Flutter Web engine.

The `initializeEngine()` function returns a [`Promise`][js-promise]
that resolves with an **app runner** object. The app runner has a
single method, `runApp()`, that runs the Flutter app.

[js-promise]: https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise

## 웹 앱 초기화 커스터마이즈 {:#customizing-web-app-initialization}

In this section,
learn how to customize each stage of your app's initialization.

### 진입점 로딩 {:#loading-the-entrypoint}

The `loadEntrypoint` method accepts these parameters:

| Name | Description | JS&nbsp;Type |
|-|-|-|
|`entrypointUrl`| The URL of your Flutter app's entrypoint. Defaults to `"main.dart.js"`. |`String`|
|`onEntrypointLoaded`| The function called when the engine is ready to be initialized. Receives an `engineInitializer` object as its only parameter. |`Function`|
|`serviceWorker`| The configuration for the `flutter_service_worker.js` loader. (If not set, the service worker won't be used.) |`Object`|

{:.table}

The `serviceWorker` JavaScript object accepts the following properties:

| Name | Description | JS&nbsp;Type |
|-|-|-|
|`serviceWorkerUrl`| The URL of the Service Worker JS file. The `serviceWorkerVersion` is appended to the URL. Defaults to `"flutter_service_worker.js?v="` |`String`|
|`serviceWorkerVersion`| Pass *the `serviceWorkerVersion` variable* set by the build process in your **`index.html`** file. |`String`|
|`timeoutMillis`| The timeout value for the service worker load. Defaults to `4000`. |`Number`|

{:.table}

### 엔진 초기화 {:#initializing-the-engine}

As of _Flutter 3.7.0_, you can use the `initializeEngine` method to
configure several run-time options of the Flutter web engine through a
plain JavaScript object.

You can add any of the following optional parameters:

| Name | Description | Dart&nbsp;Type |
|-|-|-|
|`assetBase`| The base URL of the `assets` directory of the app. Add this when Flutter loads from a different domain or subdirectory than the actual web app. You might need this when you embed Flutter web into another app, or when you deploy its assets to a CDN. |`String`|
|`canvasKitBaseUrl`| The base URL from where `canvaskit.wasm` is downloaded. |`String`|
|`canvasKitVariant`| The CanvasKit variant to download. Your options cover:<br><br>1. `auto`: Downloads the optimal variant for the browser. The option defaults to this value.<br>2. `full`: Downloads the full variant of CanvasKit that works in all browsers.<br>3. `chromium`: Downloads a smaller variant of CanvasKit that uses Chromium compatible APIs. **_Warning_**: Don't use the `chromium` option unless you plan on only using Chromium-based browsers. |`String`|
|`canvasKitForceCpuOnly`| When `true`, forces CPU-only rendering in CanvasKit (the engine won't use WebGL). |`bool`|
|`canvasKitMaximumSurfaces`| The maximum number of overlay surfaces that the CanvasKit renderer can use. |`double`|
|`debugShowSemanticNodes`| If `true`, Flutter visibly renders the semantics tree onscreen (for debugging).  |`bool`|
|`hostElement`| HTML Element into which Flutter renders the app. When not set, Flutter web takes over the whole page. |`HtmlElement`|
|`renderer`| Specifies the [web renderer][web-renderers] for the current Flutter application, either `"canvaskit"` or `"html"`. |`String`|

{:.table}

[jsflutterconfig-source]: {{site.repo.engine}}/blob/main/lib/web_ui/lib/src/engine/configuration.dart#L247-L259
[web-renderers]: /platform-integration/web/renderers

:::note
Some of the parameters described above might have been overridden
in previous releases by using properties in the `window` object.
That approach is still supported, but displays a **deprecation
notice** in the JS console, as of **Flutter 3.7.0**.
:::

#### 엔진 구성 예제 {:#engine-configuration-example}

The `initializeEngine` method lets you pass any of the configuration
parameters described above to your Flutter app.

Consider the following example.

Your Flutter app should target an HTML element with `id="flutter_app"` and
use the `canvaskit` renderer. The resulting JavaScript code would resemble
the following:

```js
onEntrypointLoaded: async function(engineInitializer) {
  let appRunner = await engineInitializer.initializeEngine({
    hostElement: document.querySelector("#flutter_app"),
    renderer: "canvaskit"
  });
  appRunner.runApp();
}
```

For a more detailed explanation of each parameter, take a look at the
**"Runtime parameters"** documentation section of the [`configuration.dart`][config-dart]
file of the web engine.

[config-dart]: {{site.repo.engine}}/blob/main/lib/web_ui/lib/src/engine/configuration.dart#L174

#### 이 단계 건너뛰기 {:#skipping-this-step}

Instead of calling `initializeEngine()` on the engine initializer (and then
`runApp()` on the application runner), you can call `autoStart()` to
initialize the engine with its default configuration, and then start the app
immediately after the initialization is complete:

```js
_flutter.loader.loadEntrypoint({
  serviceWorker: {
    serviceWorkerVersion: serviceWorkerVersion,
  },
  onEntrypointLoaded: async function(engineInitializer) {
    await engineInitializer.autoStart();
  }
});
```

## 예제: 진행률 표시기 표시 {:#example-display-a-progress-indicator}

To give the user of your application feedback
during the initialization process,
use the hooks provided for each stage to update the DOM:

```html
<html>
  <head>
    <!-- ... -->
    <script src="flutter.js" defer></script>
  </head>
  <body>
    <div id="loading"></div>
    <script>
      window.addEventListener('load', function(ev) {
        var loading = document.querySelector('#loading');
        loading.textContent = "Loading entrypoint...";
        _flutter.loader.loadEntrypoint({
          serviceWorker: {
            serviceWorkerVersion: serviceWorkerVersion,
          },
          onEntrypointLoaded: async function(engineInitializer) {
            loading.textContent = "Initializing engine...";
            let appRunner = await engineInitializer.initializeEngine();

            loading.textContent = "Running app...";
            await appRunner.runApp();
          }
        });
      });
    </script>
  </body>
</html>
```

For a more practical example using CSS animations,
see the [initialization code][gallery-init] for the Flutter Gallery.

[gallery-init]: {{site.repo.gallery-archive}}/blob/main/web/index.html

## 이전 프로젝트 업그레이드 {:#upgrading-an-older-project}

If your project was created in Flutter 2.10 or earlier,
you can create a new `index.html` file
with the latest initialization template by running
`flutter create` as follows.

First, remove the files from your `/web` directory.

Then, from your project directory, run the following:

```console
$ flutter create . --platforms=web
```
